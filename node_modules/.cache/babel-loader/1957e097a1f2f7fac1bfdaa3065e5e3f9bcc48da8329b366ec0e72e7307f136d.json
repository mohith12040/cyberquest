{"ast":null,"code":"var _jsxFileName = \"/Users/mohithneravati/Cyber quest/cyberquest/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { supabase } from \"./supabaseClient\";\nimport Leaderboard from \"./Leaderboard\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    // Check session on load\n    supabase.auth.getUser().then(({\n      data: {\n        user\n      }\n    }) => {\n      setUser(user);\n    });\n\n    // Subscribe to auth changes\n    const {\n      data: {\n        subscription\n      }\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      var _session$user;\n      setUser((_session$user = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user !== void 0 ? _session$user : null);\n    });\n    return () => subscription.unsubscribe();\n  }, []);\n  useEffect(() => {\n    if (user) {\n      upsertPlayer(user);\n    }\n  }, [user]);\n  const login = async () => {\n    await supabase.auth.signInWithOAuth({\n      provider: \"github\"\n    });\n  };\n  const logout = async () => {\n    await supabase.auth.signOut();\n  };\n  const upsertPlayer = async user => {\n    const {\n      error\n    } = await supabase.from(\"players\").upsert([{\n      user_id: user.id,\n      email: user.email,\n      level: 1,\n      xp: 0,\n      updated_at: new Date()\n    }]).eq(\"user_id\", user.id);\n    if (error) console.error(\"Upsert failed:\", error);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8 text-center font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold text-blue-600\",\n      children: \"Cyber Quest \\u2694\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-lg\",\n        children: [\"Welcome, \", user.email, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: logout,\n        className: \"mt-4 px-4 py-2 bg-red-500 text-white rounded\",\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Leaderboard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: login,\n      className: \"mt-4 px-4 py-2 bg-green-600 text-white rounded\",\n      children: \"Login with GitHub\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"yy5ZvVAQsprr2pHcLIzfQbyK1Yg=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","supabase","Leaderboard","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","user","setUser","auth","getUser","then","data","subscription","onAuthStateChange","_event","session","_session$user","unsubscribe","upsertPlayer","login","signInWithOAuth","provider","logout","signOut","error","from","upsert","user_id","id","email","level","xp","updated_at","Date","eq","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/mohithneravati/Cyber quest/cyberquest/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { supabase } from \"./supabaseClient\";\nimport Leaderboard from \"./Leaderboard\";\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // Check session on load\n    supabase.auth.getUser().then(({ data: { user } }) => {\n      setUser(user);\n    });\n\n    // Subscribe to auth changes\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      upsertPlayer(user);\n    }\n  }, [user]);\n\n  const login = async () => {\n    await supabase.auth.signInWithOAuth({\n      provider: \"github\",\n    });\n  };\n\n  const logout = async () => {\n    await supabase.auth.signOut();\n  };\n\n  const upsertPlayer = async (user) => {\n    const { error } = await supabase\n      .from(\"players\")\n      .upsert([\n        {\n          user_id: user.id,\n          email: user.email,\n          level: 1,\n          xp: 0,\n          updated_at: new Date(),\n        },\n      ])\n      .eq(\"user_id\", user.id);\n\n    if (error) console.error(\"Upsert failed:\", error);\n  };\n\n  return (\n    <div className=\"p-8 text-center font-sans\">\n      <h1 className=\"text-4xl font-bold text-blue-600\">Cyber Quest ⚔️</h1>\n      {user ? (\n        <>\n          <p className=\"mt-4 text-lg\">Welcome, {user.email}!</p>\n          <button\n            onClick={logout}\n            className=\"mt-4 px-4 py-2 bg-red-500 text-white rounded\"\n          >\n            Logout\n          </button>\n          <Leaderboard />\n        </>\n      ) : (\n        <button\n          onClick={login}\n          className=\"mt-4 px-4 py-2 bg-green-600 text-white rounded\"\n        >\n          Login with GitHub\n        </button>\n      )}\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}