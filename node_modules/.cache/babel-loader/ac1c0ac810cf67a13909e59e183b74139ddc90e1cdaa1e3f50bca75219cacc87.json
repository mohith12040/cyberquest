{"ast":null,"code":"var _jsxFileName = \"/Users/mohithneravati/Cyber quest/cyberquest/src/components/Profile.js\",\n  _s = $RefreshSig$();\n// src/components/Profile.js\nimport React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Profile() {\n  _s();\n  var _profile$username, _profile$username$;\n  const [profile, setProfile] = useState(null);\n  const [session, setSession] = useState(null);\n  const [email, setEmail] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState('');\n  useEffect(() => {\n    const fetchData = async () => {\n      var _sessionData$session;\n      const {\n        data: sessionData\n      } = await supabase.auth.getSession();\n      const user = sessionData === null || sessionData === void 0 ? void 0 : (_sessionData$session = sessionData.session) === null || _sessionData$session === void 0 ? void 0 : _sessionData$session.user;\n      if (!user) return;\n      setSession(user);\n      setEmail(user.email);\n      const {\n        data,\n        error\n      } = await supabase.from('Players').select('username, level, xp, phone, avatar_url').eq('id', user.id).single();\n      if (data) {\n        setProfile(data);\n        setPreviewUrl(data.avatar_url);\n      } else {\n        console.error('Failed to fetch profile:', error === null || error === void 0 ? void 0 : error.message);\n      }\n    };\n    fetchData();\n  }, []);\n  const handleAvatarUpload = async e => {\n    const file = e.target.files[0];\n    if (!file || !session) return;\n    setUploading(true);\n    const fileExt = file.name.split('.').pop();\n    const fileName = `${session.id}.${fileExt}`;\n    const filePath = `avatars/${fileName}`;\n    let {\n      error: uploadError\n    } = await supabase.storage.from('avatars').upload(filePath, file, {\n      upsert: true\n    });\n    if (!uploadError) {\n      const {\n        data\n      } = supabase.storage.from('avatars').getPublicUrl(filePath);\n      const publicUrl = data.publicUrl;\n      await supabase.from('Players').update({\n        avatar_url: publicUrl\n      }).eq('id', session.id);\n      setProfile(prev => ({\n        ...prev,\n        avatar_url: publicUrl\n      }));\n      setPreviewUrl(publicUrl);\n    } else {\n      alert('Failed to upload image.');\n    }\n    setUploading(false);\n  };\n  if (!profile) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-white p-4\",\n    children: \"Loading profile...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 24\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white px-4 py-10 flex flex-col items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-6 rounded shadow-xl w-full max-w-md text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: \"\\uD83D\\uDC64 Your Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center mb-4\",\n        children: previewUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewUrl,\n          alt: \"Avatar\",\n          className: \"w-24 h-24 rounded-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center text-2xl font-bold\",\n          children: ((_profile$username = profile.username) === null || _profile$username === void 0 ? void 0 : (_profile$username$ = _profile$username[0]) === null || _profile$username$ === void 0 ? void 0 : _profile$username$.toUpperCase()) || '?'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleAvatarUpload,\n        className: \"text-sm text-gray-400 mb-4\",\n        disabled: uploading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2 text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 14\n          }, this), \" \", profile.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 14\n          }, this), \" \", email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Phone:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 14\n          }, this), \" \", profile.phone || 'N/A']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Level:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 14\n          }, this), \" \", profile.level]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"XP:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 14\n          }, this), \" \", profile.xp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"ZNX5ZUMD8yu/njVWVrsIq8UrGRU=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","supabase","jsxDEV","_jsxDEV","Profile","_s","_profile$username","_profile$username$","profile","setProfile","session","setSession","email","setEmail","uploading","setUploading","previewUrl","setPreviewUrl","fetchData","_sessionData$session","data","sessionData","auth","getSession","user","error","from","select","eq","id","single","avatar_url","console","message","handleAvatarUpload","e","file","target","files","fileExt","name","split","pop","fileName","filePath","uploadError","storage","upload","upsert","getPublicUrl","publicUrl","update","prev","alert","className","children","_jsxFileName","lineNumber","columnNumber","src","alt","username","toUpperCase","type","accept","onChange","disabled","phone","level","xp","_c","$RefreshReg$"],"sources":["/Users/mohithneravati/Cyber quest/cyberquest/src/components/Profile.js"],"sourcesContent":["// src/components/Profile.js\nimport React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\n\nfunction Profile() {\n  const [profile, setProfile] = useState(null);\n  const [session, setSession] = useState(null);\n  const [email, setEmail] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState('');\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const { data: sessionData } = await supabase.auth.getSession();\n      const user = sessionData?.session?.user;\n      if (!user) return;\n\n      setSession(user);\n      setEmail(user.email);\n\n      const { data, error } = await supabase\n        .from('Players')\n        .select('username, level, xp, phone, avatar_url')\n        .eq('id', user.id)\n        .single();\n\n      if (data) {\n        setProfile(data);\n        setPreviewUrl(data.avatar_url);\n      } else {\n        console.error('Failed to fetch profile:', error?.message);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleAvatarUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file || !session) return;\n\n    setUploading(true);\n\n    const fileExt = file.name.split('.').pop();\n    const fileName = `${session.id}.${fileExt}`;\n    const filePath = `avatars/${fileName}`;\n\n    let { error: uploadError } = await supabase.storage\n      .from('avatars')\n      .upload(filePath, file, { upsert: true });\n\n    if (!uploadError) {\n      const { data } = supabase.storage.from('avatars').getPublicUrl(filePath);\n      const publicUrl = data.publicUrl;\n\n      await supabase\n        .from('Players')\n        .update({ avatar_url: publicUrl })\n        .eq('id', session.id);\n\n      setProfile((prev) => ({ ...prev, avatar_url: publicUrl }));\n      setPreviewUrl(publicUrl);\n    } else {\n      alert('Failed to upload image.');\n    }\n\n    setUploading(false);\n  };\n\n  if (!profile) return <div className=\"text-white p-4\">Loading profile...</div>;\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white px-4 py-10 flex flex-col items-center\">\n      <div className=\"bg-gray-800 p-6 rounded shadow-xl w-full max-w-md text-center\">\n        <h2 className=\"text-2xl font-bold mb-4\">👤 Your Profile</h2>\n\n        <div className=\"flex justify-center mb-4\">\n          {previewUrl ? (\n            <img src={previewUrl} alt=\"Avatar\" className=\"w-24 h-24 rounded-full object-cover\" />\n          ) : (\n            <div className=\"w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center text-2xl font-bold\">\n              {profile.username?.[0]?.toUpperCase() || '?'}\n            </div>\n          )}\n        </div>\n\n        <input\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleAvatarUpload}\n          className=\"text-sm text-gray-400 mb-4\"\n          disabled={uploading}\n        />\n\n        <div className=\"space-y-2 text-left\">\n          <p><strong>Username:</strong> {profile.username}</p>\n          <p><strong>Email:</strong> {email}</p>\n          <p><strong>Phone:</strong> {profile.phone || 'N/A'}</p>\n          <p><strong>Level:</strong> {profile.level}</p>\n          <p><strong>XP:</strong> {profile.xp}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}