{"ast":null,"code":"var _jsxFileName = \"/Users/mohithneravati/Cyber quest/cyberquest/src/components/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Profile({\n  session\n}) {\n  _s();\n  var _session$user;\n  const [userData, setUserData] = useState(null);\n  const [avatarUrl, setAvatarUrl] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const userId = session === null || session === void 0 ? void 0 : (_session$user = session.user) === null || _session$user === void 0 ? void 0 : _session$user.id;\n  useEffect(() => {\n    if (!userId) return;\n    const fetchProfile = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from('Players').select('*').eq('id', userId).single();\n      if (data) {\n        setUserData(data);\n        setAvatarUrl(data.avatar_url || null);\n      } else {\n        console.error('Profile fetch error:', error === null || error === void 0 ? void 0 : error.message);\n      }\n      setLoading(false);\n    };\n    fetchProfile();\n  }, [userId]);\n  const handleAvatarUpload = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const fileExt = file.name.split('.').pop();\n    const fileName = `${userId}.${fileExt}`;\n    const filePath = `avatars/${fileName}`;\n    const {\n      error: uploadError\n    } = await supabase.storage.from('avatars').upload(filePath, file, {\n      upsert: true\n    });\n    if (uploadError) {\n      alert('Failed to upload image.');\n      return;\n    }\n    const {\n      data: publicUrl\n    } = supabase.storage.from('avatars').getPublicUrl(filePath);\n    setAvatarUrl(publicUrl.publicUrl);\n    await supabase.from('Players').update({\n      avatar_url: publicUrl.publicUrl\n    }).eq('id', userId);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-white px-4 py-8 min-h-screen bg-gray-900\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: \"Loading profile...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen px-6 py-10 bg-gray-900 text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold mb-6\",\n      children: \"Your Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col sm:flex-row gap-8 items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: avatarUrl || 'https://api.dicebear.com/7.x/initials/svg?seed=' + ((userData === null || userData === void 0 ? void 0 : userData.username) || 'User'),\n          alt: \"Avatar\",\n          className: \"w-32 h-32 rounded-full border-4 border-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleAvatarUpload,\n          className: \"mt-3 text-sm text-gray-300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 14\n          }, this), \" \", userData === null || userData === void 0 ? void 0 : userData.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 14\n          }, this), \" \", userData === null || userData === void 0 ? void 0 : userData.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: \"Phone:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 14\n          }, this), \" \", session.user.phone || 'N/A']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: \"Level:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 14\n          }, this), \" \", userData === null || userData === void 0 ? void 0 : userData.level]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: \"XP:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 14\n          }, this), \" \", userData === null || userData === void 0 ? void 0 : userData.xp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"XT64rdOFXv7R3renM7MJSYbE2WQ=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","supabase","jsxDEV","_jsxDEV","Profile","session","_s","_session$user","userData","setUserData","avatarUrl","setAvatarUrl","loading","setLoading","userId","user","id","fetchProfile","data","error","from","select","eq","single","avatar_url","console","message","handleAvatarUpload","event","file","target","files","fileExt","name","split","pop","fileName","filePath","uploadError","storage","upload","upsert","alert","publicUrl","getPublicUrl","update","className","children","_jsxFileName","lineNumber","columnNumber","src","username","alt","type","accept","onChange","email","phone","level","xp","_c","$RefreshReg$"],"sources":["/Users/mohithneravati/Cyber quest/cyberquest/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\n\nfunction Profile({ session }) {\n  const [userData, setUserData] = useState(null);\n  const [avatarUrl, setAvatarUrl] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const userId = session?.user?.id;\n\n  useEffect(() => {\n    if (!userId) return;\n\n    const fetchProfile = async () => {\n      const { data, error } = await supabase\n        .from('Players')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      if (data) {\n        setUserData(data);\n        setAvatarUrl(data.avatar_url || null);\n      } else {\n        console.error('Profile fetch error:', error?.message);\n      }\n\n      setLoading(false);\n    };\n\n    fetchProfile();\n  }, [userId]);\n\n  const handleAvatarUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const fileExt = file.name.split('.').pop();\n    const fileName = `${userId}.${fileExt}`;\n    const filePath = `avatars/${fileName}`;\n\n    const { error: uploadError } = await supabase.storage\n      .from('avatars')\n      .upload(filePath, file, { upsert: true });\n\n    if (uploadError) {\n      alert('Failed to upload image.');\n      return;\n    }\n\n    const { data: publicUrl } = supabase.storage.from('avatars').getPublicUrl(filePath);\n    setAvatarUrl(publicUrl.publicUrl);\n\n    await supabase\n      .from('Players')\n      .update({ avatar_url: publicUrl.publicUrl })\n      .eq('id', userId);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-white px-4 py-8 min-h-screen bg-gray-900\">\n        <h2 className=\"text-2xl font-bold mb-4\">Loading profile...</h2>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen px-6 py-10 bg-gray-900 text-white\">\n      <h2 className=\"text-3xl font-bold mb-6\">Your Profile</h2>\n      <div className=\"flex flex-col sm:flex-row gap-8 items-center\">\n        <div>\n          <img\n            src={avatarUrl || 'https://api.dicebear.com/7.x/initials/svg?seed=' + (userData?.username || 'User')}\n            alt=\"Avatar\"\n            className=\"w-32 h-32 rounded-full border-4 border-purple-600\"\n          />\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleAvatarUpload}\n            className=\"mt-3 text-sm text-gray-300\"\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <p><span className=\"font-semibold\">Username:</span> {userData?.username}</p>\n          <p><span className=\"font-semibold\">Email:</span> {userData?.email}</p>\n          <p><span className=\"font-semibold\">Phone:</span> {session.user.phone || 'N/A'}</p>\n          <p><span className=\"font-semibold\">Level:</span> {userData?.level}</p>\n          <p><span className=\"font-semibold\">XP:</span> {userData?.xp}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}